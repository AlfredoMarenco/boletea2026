import{c as He,a as Ee,u as Pe,j as s,L as Qe,H as Ve}from"./app-D1mxkyHe.js";import{h as Ce}from"./dropdown-menu-B5a5rjgY.js";import{A as $e}from"./app-layout-v9tL868Z.js";import{B as we}from"./button-D7-hxBhi.js";import{I as me}from"./input-BJmkZBh9.js";import{L as T}from"./label-Dc0vL7nF.js";import{T as ze}from"./textarea-Cd63_q7V.js";import{S as Le}from"./switch-DoJ3jUZb.js";import{L as Re}from"./LocationPicker-DtbFyw0l.js";import{A as Ie}from"./arrow-left-D-myQYyL.js";import{M as Je}from"./map-pin-CD4gDGzF.js";/* empty css            */import"./index-ai5m-ZGW.js";import"./x-qx3Sn1eV.js";import"./tooltip-BPZmbs3V.js";import"./index-0UzTBklu.js";import"./index-BrxPOsu5.js";import"./index-m8S9IqQt.js";import"./index-DILN9ohR.js";const Me=[{key:"monday",label:"Lunes"},{key:"tuesday",label:"Martes"},{key:"wednesday",label:"Miércoles"},{key:"thursday",label:"Jueves"},{key:"friday",label:"Viernes"},{key:"saturday",label:"Sábado"},{key:"sunday",label:"Domingo"}];function hs(c){const e=He.c(129),{salesCenter:l,states:he}=c,[fe,Ae]=Ee.useState(l.address||""),[pe,Fe]=Ee.useState("");let U;e[0]===Symbol.for("react.memo_cache_sentinel")?(U=Me.reduce(Ge,{}),e[0]=U):U=e[0];const Be=U;let Y;e[1]!==l.opening_hours?(Y={...Be,...l.opening_hours},e[1]=l.opening_hours,e[2]=Y):Y=e[2];const ue=Y,xe=l.name||"",ge=l.address||"",je=!!l.is_active;let d;e[3]!==l.states?(d=l.states?l.states.map(Te):[],e[3]=l.states,e[4]=d):d=e[4];const _e=l.latitude||null,be=l.longitude||null;let q;e[5]!==ue||e[6]!==xe||e[7]!==ge||e[8]!==je||e[9]!==d||e[10]!==_e||e[11]!==be?(q={_method:"put",name:xe,address:ge,logo_path:null,is_active:je,opening_hours:ue,states:d,latitude:_e,longitude:be},e[5]=ue,e[6]=xe,e[7]=ge,e[8]=je,e[9]=d,e[10]=_e,e[11]=be,e[12]=q):q=e[12];const{data:i,setData:a,post:ye,transform:ve,processing:W,errors:o}=Pe(q);let X;e[13]!==i.opening_hours||e[14]!==a?(X=(t,n,r)=>{a("opening_hours",{...i.opening_hours,[t]:{...i.opening_hours[t],[n]:r}})},e[13]=i.opening_hours,e[14]=a,e[15]=X):X=e[15];const G=X;let Z;e[16]!==ye||e[17]!==l.id||e[18]!==ve?(Z=t=>{t.preventDefault(),ve(Oe),ye(Ce("admin.sales-centers.update",l.id))},e[16]=ye,e[17]=l.id,e[18]=ve,e[19]=Z):Z=e[19];const Ne=Z;let K;e[20]===Symbol.for("react.memo_cache_sentinel")?(K=[{title:"Puntos de Venta",href:Ce("admin.sales-centers.index")},{title:"Editar",href:"#"}],e[20]=K):K=e[20];const Se=`Editar ${l.name}`;let m;e[21]!==Se?(m=s.jsx(Ve,{title:Se}),e[21]=Se,e[22]=m):m=e[22];let ee;e[23]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx(we,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(Qe,{href:Ce("admin.sales-centers.index"),children:s.jsx(Ie,{className:"h-5 w-5"})})}),e[23]=ee):ee=e[23];let h;e[24]!==l.name?(h=s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[ee,s.jsxs("h1",{className:"text-2xl font-bold",children:["Editar: ",l.name]})]}),e[24]=l.name,e[25]=h):h=e[25];let se;e[26]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx(T,{htmlFor:"name",children:"Nombre"}),e[26]=se):se=e[26];let f;e[27]!==a?(f=t=>a("name",t.target.value),e[27]=a,e[28]=f):f=e[28];let p;e[29]!==i.name||e[30]!==f?(p=s.jsx(me,{id:"name",value:i.name,onChange:f}),e[29]=i.name,e[30]=f,e[31]=p):p=e[31];let u;e[32]!==o.name?(u=o.name&&s.jsx("span",{className:"text-red-500 text-sm",children:o.name}),e[32]=o.name,e[33]=u):u=e[33];let x;e[34]!==p||e[35]!==u?(x=s.jsxs("div",{className:"space-y-2",children:[se,p,u]}),e[34]=p,e[35]=u,e[36]=x):x=e[36];let te;e[37]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx(T,{htmlFor:"logo",children:"Logo (Opcional)"}),e[37]=te):te=e[37];let g;e[38]!==l.logo_path?(g=l.logo_path&&s.jsx("img",{src:l.logo_path,className:"h-10 w-10 object-contain border rounded"}),e[38]=l.logo_path,e[39]=g):g=e[39];let j;e[40]!==a?(j=s.jsx(me,{id:"logo",type:"file",accept:"image/*",onChange:t=>a("logo_path",t.target.files?t.target.files[0]:null)}),e[40]=a,e[41]=j):j=e[41];let _;e[42]!==g||e[43]!==j?(_=s.jsxs("div",{className:"flex gap-4 items-center",children:[g,j]}),e[42]=g,e[43]=j,e[44]=_):_=e[44];let b;e[45]!==o.logo_path?(b=o.logo_path&&s.jsx("span",{className:"text-red-500 text-sm",children:o.logo_path}),e[45]=o.logo_path,e[46]=b):b=e[46];let y;e[47]!==_||e[48]!==b?(y=s.jsxs("div",{className:"space-y-2",children:[te,_,b]}),e[47]=_,e[48]=b,e[49]=y):y=e[49];let le;e[50]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(T,{htmlFor:"address",children:"Dirección"}),e[50]=le):le=e[50];let v;e[51]!==a?(v=t=>{a("address",t.target.value),Ae(t.target.value)},e[51]=a,e[52]=v):v=e[52];let N;e[53]!==i.address||e[54]!==v?(N=s.jsx(ze,{id:"address",value:i.address,onChange:v,placeholder:"Calle, Número, Colonia, Ciudad..."}),e[53]=i.address,e[54]=v,e[55]=N):N=e[55];let S;e[56]!==fe?(S=()=>Fe(fe),e[56]=fe,e[57]=S):S=e[57];let ae;e[58]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx(Je,{className:"h-4 w-4 mr-2"}),e[58]=ae):ae=e[58];let k;e[59]!==S?(k=s.jsxs(we,{type:"button",variant:"secondary",onClick:S,title:"Buscar en el mapa",className:"h-auto",children:[ae,"Buscar en Mapa"]}),e[59]=S,e[60]=k):k=e[60];let C;e[61]!==N||e[62]!==k?(C=s.jsxs("div",{className:"flex gap-2",children:[N,k]}),e[61]=N,e[62]=k,e[63]=C):C=e[63];let w;e[64]!==o.address?(w=o.address&&s.jsx("span",{className:"text-red-500 text-sm",children:o.address}),e[64]=o.address,e[65]=w):w=e[65];let L;e[66]!==C||e[67]!==w?(L=s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[le,C,w]}),e[66]=C,e[67]=w,e[68]=L):L=e[68];let ie;e[69]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(T,{children:"Ubicación en Mapa"}),e[69]=ie):ie=e[69];let A,E;e[70]!==a?(A=(t,n)=>{a(r=>({...r,latitude:t,longitude:n}))},E=t=>{a(n=>({...n,address:t})),Ae(t)},e[70]=a,e[71]=A,e[72]=E):(A=e[71],E=e[72]);let M;e[73]!==pe||e[74]!==l.latitude||e[75]!==l.longitude||e[76]!==A||e[77]!==E?(M=s.jsx(Re,{initialLatitude:l.latitude,initialLongitude:l.longitude,searchQuery:pe,onLocationChange:A,onAddressFound:E}),e[73]=pe,e[74]=l.latitude,e[75]=l.longitude,e[76]=A,e[77]=E,e[78]=M):M=e[78];let ne;e[79]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Haz clic en el mapa para ajustar la ubicación exacta."}),e[79]=ne):ne=e[79];let F;e[80]!==M?(F=s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[ie,M,ne]}),e[80]=M,e[81]=F):F=e[81];let B;e[82]!==x||e[83]!==y||e[84]!==L||e[85]!==F?(B=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x,y,L,F]}),e[82]=x,e[83]=y,e[84]=L,e[85]=F,e[86]=B):B=e[86];let oe;e[87]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx("h3",{className:"text-lg font-semibold",children:"Estados Relacionados"}),e[87]=oe):oe=e[87];let D;if(e[88]!==i.states||e[89]!==a||e[90]!==he){let t;e[92]!==i.states||e[93]!==a?(t=n=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Le,{id:`state-${n.id}`,checked:i.states.includes(n.id),onCheckedChange:r=>{r?a("states",[...i.states,n.id]):a("states",i.states.filter(De=>De!==n.id))}}),s.jsx(T,{htmlFor:`state-${n.id}`,children:n.name})]},n.id),e[92]=i.states,e[93]=a,e[94]=t):t=e[94],D=he.map(t),e[88]=i.states,e[89]=a,e[90]=he,e[91]=D}else D=e[91];let H;e[95]!==D?(H=s.jsxs("div",{className:"space-y-4",children:[oe,s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 border rounded-lg bg-card/50",children:D})]}),e[95]=D,e[96]=H):H=e[96];let re;e[97]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx("h3",{className:"text-lg font-semibold",children:"Horarios de Atención"}),e[97]=re):re=e[97];let P;e[98]!==i.opening_hours||e[99]!==G?(P=Me.map(t=>{const n=i.opening_hours[t.key]||{closed:!0,open:"09:00",close:"18:00"};return s.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border bg-background/50",children:[s.jsx("div",{className:"w-24 font-medium",children:t.label}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{checked:!n.closed,onCheckedChange:r=>G(t.key,"closed",!r)}),s.jsx("span",{className:"text-sm text-muted-foreground w-16",children:n.closed?"Cerrado":"Abierto"})]}),!n.closed&&s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(me,{type:"time",className:"w-32",value:n.open,onChange:r=>G(t.key,"open",r.target.value)}),s.jsx("span",{children:"a"}),s.jsx(me,{type:"time",className:"w-32",value:n.close,onChange:r=>G(t.key,"close",r.target.value)})]})]},t.key)}),e[98]=i.opening_hours,e[99]=G,e[100]=P):P=e[100];let Q;e[101]!==P?(Q=s.jsxs("div",{className:"space-y-4",children:[re,s.jsx("div",{className:"grid gap-4",children:P})]}),e[101]=P,e[102]=Q):Q=e[102];let V;e[103]!==a?(V=t=>a("is_active",t),e[103]=a,e[104]=V):V=e[104];let $;e[105]!==i.is_active||e[106]!==V?($=s.jsx(Le,{checked:i.is_active,onCheckedChange:V}),e[105]=i.is_active,e[106]=V,e[107]=$):$=e[107];let ce;e[108]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(T,{children:"Punto de Venta Activo"}),e[108]=ce):ce=e[108];let z;e[109]!==$?(z=s.jsxs("div",{className:"flex items-center gap-2",children:[$,ce]}),e[109]=$,e[110]=z):z=e[110];const ke=W?"Guardando...":"Actualizar Punto de Venta";let R;e[111]!==W||e[112]!==ke?(R=s.jsx(we,{type:"submit",disabled:W,children:ke}),e[111]=W,e[112]=ke,e[113]=R):R=e[113];let I;e[114]!==z||e[115]!==R?(I=s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[z,R]}),e[114]=z,e[115]=R,e[116]=I):I=e[116];let J;e[117]!==Ne||e[118]!==B||e[119]!==H||e[120]!==Q||e[121]!==I?(J=s.jsxs("form",{onSubmit:Ne,className:"space-y-8 bg-card p-6 rounded-xl border shadow-sm",children:[B,H,Q,I]}),e[117]=Ne,e[118]=B,e[119]=H,e[120]=Q,e[121]=I,e[122]=J):J=e[122];let O;e[123]!==h||e[124]!==J?(O=s.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[h,J]}),e[123]=h,e[124]=J,e[125]=O):O=e[125];let de;return e[126]!==m||e[127]!==O?(de=s.jsxs($e,{breadcrumbs:K,children:[m,O]}),e[126]=m,e[127]=O,e[128]=de):de=e[128],de}function Oe(c){return{...c,opening_hours:JSON.stringify(c.opening_hours)}}function Te(c){return c.id}function Ge(c,e){return c[e.key]={open:"09:00",close:"18:00",closed:!1},c}export{hs as default};
