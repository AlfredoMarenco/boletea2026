import{c as _e,a as xe,u as ve,j as s,L as Ne,H as Se}from"./app-D1mxkyHe.js";import{h as he}from"./dropdown-menu-B5a5rjgY.js";import{A as ke}from"./app-layout-v9tL868Z.js";import{B as fe}from"./button-D7-hxBhi.js";import{I as ae}from"./input-BJmkZBh9.js";import{L as Q}from"./label-Dc0vL7nF.js";import{T as Ce}from"./textarea-Cd63_q7V.js";import{S as pe}from"./switch-DoJ3jUZb.js";import{L as we}from"./LocationPicker-DtbFyw0l.js";import{A as Le}from"./arrow-left-D-myQYyL.js";import{M as Ae}from"./map-pin-CD4gDGzF.js";/* empty css            */import"./index-ai5m-ZGW.js";import"./x-qx3Sn1eV.js";import"./tooltip-BPZmbs3V.js";import"./index-0UzTBklu.js";import"./index-BrxPOsu5.js";import"./index-m8S9IqQt.js";import"./index-DILN9ohR.js";const ge=[{key:"monday",label:"Lunes"},{key:"tuesday",label:"Martes"},{key:"wednesday",label:"Miércoles"},{key:"thursday",label:"Jueves"},{key:"friday",label:"Viernes"},{key:"saturday",label:"Sábado"},{key:"sunday",label:"Domingo"}];function Xe(o){const e=_e.c(102),{states:ie}=o,[re,ue]=xe.useState(""),[ne,je]=xe.useState("");let R;e[0]===Symbol.for("react.memo_cache_sentinel")?(R=ge.reduce(Pe,{}),e[0]=R):R=e[0];const be=R;let T;e[1]===Symbol.for("react.memo_cache_sentinel")?(T=[],e[1]=T):T=e[1];let $;e[2]===Symbol.for("react.memo_cache_sentinel")?($={name:"",address:"",logo_path:null,is_active:!0,opening_hours:be,states:T,latitude:null,longitude:null},e[2]=$):$=e[2];const{data:a,setData:l,post:oe,transform:ce,processing:z,errors:r}=ve($);let G;e[3]!==a.opening_hours||e[4]!==l?(G=(t,i,n)=>{l("opening_hours",{...a.opening_hours,[t]:{...a.opening_hours[t],[i]:n}})},e[3]=a.opening_hours,e[4]=l,e[5]=G):G=e[5];const H=G;let I;e[6]!==oe||e[7]!==ce?(I=t=>{t.preventDefault(),ce(Me),oe(he("admin.sales-centers.store"))},e[6]=oe,e[7]=ce,e[8]=I):I=e[8];const de=I;let J,q;e[9]===Symbol.for("react.memo_cache_sentinel")?(J=[{title:"Puntos de Venta",href:he("admin.sales-centers.index")},{title:"Nuevo",href:"#"}],q=s.jsx(Se,{title:"Nuevo Punto de Venta"}),e[9]=J,e[10]=q):(J=e[9],q=e[10]);let O;e[11]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx(fe,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(Ne,{href:he("admin.sales-centers.index"),children:s.jsx(Le,{className:"h-5 w-5"})})}),s.jsx("h1",{className:"text-2xl font-bold",children:"Nuevo Punto de Venta"})]}),e[11]=O):O=e[11];let U;e[12]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(Q,{htmlFor:"name",children:"Nombre"}),e[12]=U):U=e[12];let c;e[13]!==l?(c=t=>l("name",t.target.value),e[13]=l,e[14]=c):c=e[14];let d;e[15]!==a.name||e[16]!==c?(d=s.jsx(ae,{id:"name",value:a.name,onChange:c,placeholder:"Ej. Taquilla Principal"}),e[15]=a.name,e[16]=c,e[17]=d):d=e[17];let m;e[18]!==r.name?(m=r.name&&s.jsx("span",{className:"text-red-500 text-sm",children:r.name}),e[18]=r.name,e[19]=m):m=e[19];let h;e[20]!==d||e[21]!==m?(h=s.jsxs("div",{className:"space-y-2",children:[U,d,m]}),e[20]=d,e[21]=m,e[22]=h):h=e[22];let Y;e[23]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(Q,{htmlFor:"logo",children:"Logo"}),e[23]=Y):Y=e[23];let f;e[24]!==l?(f=s.jsx(ae,{id:"logo",type:"file",accept:"image/*",onChange:t=>l("logo_path",t.target.files?t.target.files[0]:null)}),e[24]=l,e[25]=f):f=e[25];let p;e[26]!==r.logo_path?(p=r.logo_path&&s.jsx("span",{className:"text-red-500 text-sm",children:r.logo_path}),e[26]=r.logo_path,e[27]=p):p=e[27];let u;e[28]!==f||e[29]!==p?(u=s.jsxs("div",{className:"space-y-2",children:[Y,f,p]}),e[28]=f,e[29]=p,e[30]=u):u=e[30];let W;e[31]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(Q,{htmlFor:"address",children:"Dirección"}),e[31]=W):W=e[31];let x;e[32]!==l?(x=t=>{l("address",t.target.value),ue(t.target.value)},e[32]=l,e[33]=x):x=e[33];let g;e[34]!==a.address||e[35]!==x?(g=s.jsx(Ce,{id:"address",value:a.address,onChange:x,placeholder:"Calle, Número, Colonia, Ciudad..."}),e[34]=a.address,e[35]=x,e[36]=g):g=e[36];let j;e[37]!==re?(j=()=>je(re),e[37]=re,e[38]=j):j=e[38];let X;e[39]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(Ae,{className:"h-4 w-4 mr-2"}),e[39]=X):X=e[39];let b;e[40]!==j?(b=s.jsxs(fe,{type:"button",variant:"secondary",onClick:j,title:"Buscar en el mapa",className:"h-auto",children:[X,"Buscar en Mapa"]}),e[40]=j,e[41]=b):b=e[41];let y;e[42]!==g||e[43]!==b?(y=s.jsxs("div",{className:"flex gap-2",children:[g,b]}),e[42]=g,e[43]=b,e[44]=y):y=e[44];let _;e[45]!==r.address?(_=r.address&&s.jsx("span",{className:"text-red-500 text-sm",children:r.address}),e[45]=r.address,e[46]=_):_=e[46];let v;e[47]!==y||e[48]!==_?(v=s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[W,y,_]}),e[47]=y,e[48]=_,e[49]=v):v=e[49];let Z;e[50]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(Q,{children:"Ubicación en Mapa"}),e[50]=Z):Z=e[50];let N,S;e[51]!==l?(N=(t,i)=>{l(n=>({...n,latitude:t,longitude:i}))},S=t=>{l(i=>({...i,address:t})),ue(t)},e[51]=l,e[52]=N,e[53]=S):(N=e[52],S=e[53]);let k;e[54]!==ne||e[55]!==N||e[56]!==S?(k=s.jsx(we,{searchQuery:ne,onLocationChange:N,onAddressFound:S}),e[54]=ne,e[55]=N,e[56]=S,e[57]=k):k=e[57];let K;e[58]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx("p",{className:"text-sm text-gray-500",children:'Haz clic en el mapa para seleccionar la ubicación exacta o usa el botón "Buscar en Mapa" con la dirección ingresada.'}),e[58]=K):K=e[58];let C;e[59]!==k?(C=s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[Z,k,K]}),e[59]=k,e[60]=C):C=e[60];let w;e[61]!==h||e[62]!==u||e[63]!==v||e[64]!==C?(w=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h,u,v,C]}),e[61]=h,e[62]=u,e[63]=v,e[64]=C,e[65]=w):w=e[65];let ee;e[66]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx("h3",{className:"text-lg font-semibold",children:"Estados Relacionados"}),e[66]=ee):ee=e[66];let L;if(e[67]!==a.states||e[68]!==l||e[69]!==ie){let t;e[71]!==a.states||e[72]!==l?(t=i=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pe,{id:`state-${i.id}`,checked:a.states.includes(i.id),onCheckedChange:n=>{n?l("states",[...a.states,i.id]):l("states",a.states.filter(ye=>ye!==i.id))}}),s.jsx(Q,{htmlFor:`state-${i.id}`,children:i.name})]},i.id),e[71]=a.states,e[72]=l,e[73]=t):t=e[73],L=ie.map(t),e[67]=a.states,e[68]=l,e[69]=ie,e[70]=L}else L=e[70];let A;e[74]!==L?(A=s.jsxs("div",{className:"space-y-4",children:[ee,s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 border rounded-lg bg-card/50",children:L})]}),e[74]=L,e[75]=A):A=e[75];let se;e[76]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx("h3",{className:"text-lg font-semibold",children:"Horarios de Atención"}),e[76]=se):se=e[76];let M;e[77]!==a.opening_hours||e[78]!==H?(M=ge.map(t=>{const i=a.opening_hours[t.key]||{closed:!0};return s.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border bg-background/50",children:[s.jsx("div",{className:"w-24 font-medium",children:t.label}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{checked:!i.closed,onCheckedChange:n=>H(t.key,"closed",!n)}),s.jsx("span",{className:"text-sm text-muted-foreground w-16",children:i.closed?"Cerrado":"Abierto"})]}),!i.closed&&s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(ae,{type:"time",className:"w-32",value:i.open,onChange:n=>H(t.key,"open",n.target.value)}),s.jsx("span",{children:"a"}),s.jsx(ae,{type:"time",className:"w-32",value:i.close,onChange:n=>H(t.key,"close",n.target.value)})]})]},t.key)}),e[77]=a.opening_hours,e[78]=H,e[79]=M):M=e[79];let P;e[80]!==M?(P=s.jsxs("div",{className:"space-y-4",children:[se,s.jsx("div",{className:"grid gap-4",children:M})]}),e[80]=M,e[81]=P):P=e[81];let F;e[82]!==l?(F=t=>l("is_active",t),e[82]=l,e[83]=F):F=e[83];let V;e[84]!==a.is_active||e[85]!==F?(V=s.jsx(pe,{checked:a.is_active,onCheckedChange:F}),e[84]=a.is_active,e[85]=F,e[86]=V):V=e[86];let te;e[87]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx(Q,{children:"Punto de Venta Activo"}),e[87]=te):te=e[87];let B;e[88]!==V?(B=s.jsxs("div",{className:"flex items-center gap-2",children:[V,te]}),e[88]=V,e[89]=B):B=e[89];const me=z?"Guardando...":"Guardar Punto de Venta";let D;e[90]!==z||e[91]!==me?(D=s.jsx(fe,{type:"submit",disabled:z,children:me}),e[90]=z,e[91]=me,e[92]=D):D=e[92];let E;e[93]!==B||e[94]!==D?(E=s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[B,D]}),e[93]=B,e[94]=D,e[95]=E):E=e[95];let le;return e[96]!==de||e[97]!==w||e[98]!==A||e[99]!==P||e[100]!==E?(le=s.jsxs(ke,{breadcrumbs:J,children:[q,s.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[O,s.jsxs("form",{onSubmit:de,className:"space-y-8 bg-card p-6 rounded-xl border shadow-sm",children:[w,A,P,E]})]})]}),e[96]=de,e[97]=w,e[98]=A,e[99]=P,e[100]=E,e[101]=le):le=e[101],le}function Me(o){return{...o,opening_hours:JSON.stringify(o.opening_hours)}}function Pe(o,e){return o[e.key]={open:"09:00",close:"18:00",closed:!1},o}export{Xe as default};
