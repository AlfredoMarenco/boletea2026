import{c as Ve,b as Fe,u as Be,j as s,L as De,H as Qe}from"./app-C57to4gS.js";import{h as Ce}from"./dropdown-menu-Bh7vV8NV.js";import{A as qe}from"./app-layout-rmYNBsAB.js";import{B as we}from"./button-Cs4SO7Sp.js";import{I as ge}from"./input-BfnCHbPe.js";import{L as r}from"./label-VzbhcBpr.js";import{T as He}from"./textarea-CCfw-9G-.js";import{S as I}from"./switch-ChtubV49.js";import{L as Te}from"./LocationPicker-zfJEB4w_.js";import{A as Re}from"./arrow-left-1dlwQytq.js";import{M as $e}from"./map-pin-nV-hQv1D.js";/* empty css            */import"./index-BAiAcrRY.js";import"./utils-DvRnx1Xn.js";import"./x-KWqWXJEt.js";import"./tooltip-DwFPhEVT.js";import"./index-pk2ercdV.js";import"./index-DguSKVDC.js";import"./index-YfNXcXHS.js";import"./index-CWmhLRVy.js";const Ae=[{key:"monday",label:"Lunes"},{key:"tuesday",label:"Martes"},{key:"wednesday",label:"Miércoles"},{key:"thursday",label:"Jueves"},{key:"friday",label:"Viernes"},{key:"saturday",label:"Sábado"},{key:"sunday",label:"Domingo"}];function ms(c){const e=Ve.c(128),{states:ye}=c,[je,Le]=Fe.useState(""),[be,Me]=Fe.useState("");let O;e[0]===Symbol.for("react.memo_cache_sentinel")?(O=Ae.reduce(Ge,{}),e[0]=O):O=e[0];const Pe=O;let U;e[1]===Symbol.for("react.memo_cache_sentinel")?(U=[],e[1]=U):U=e[1];let Y;e[2]===Symbol.for("react.memo_cache_sentinel")?(Y={name:"",address:"",logo_path:null,is_active:!0,opening_hours:Pe,states:U,latitude:null,longitude:null,is_digital_only:!1,payment_methods_cash:!1,payment_methods_card:!1},e[2]=Y):Y=e[2];const{data:a,setData:l,post:ve,transform:Ne,processing:W,errors:o}=Be(Y);let X;e[3]!==a.opening_hours||e[4]!==l?(X=(t,i,n)=>{l("opening_hours",{...a.opening_hours,[t]:{...a.opening_hours[t],[i]:n}})},e[3]=a.opening_hours,e[4]=l,e[5]=X):X=e[5];const J=X;let Z;e[6]!==ve||e[7]!==Ne?(Z=t=>{t.preventDefault(),Ne(ze),ve(Ce("admin.sales-centers.store"))},e[6]=ve,e[7]=Ne,e[8]=Z):Z=e[8];const Se=Z;let K,ee;e[9]===Symbol.for("react.memo_cache_sentinel")?(K=[{title:"Puntos de Venta",href:Ce("admin.sales-centers.index")},{title:"Nuevo",href:"#"}],ee=s.jsx(Qe,{title:"Nuevo Punto de Venta"}),e[9]=K,e[10]=ee):(K=e[9],ee=e[10]);let se;e[11]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx(we,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(De,{href:Ce("admin.sales-centers.index"),children:s.jsx(Re,{className:"h-5 w-5"})})}),s.jsx("h1",{className:"text-2xl font-bold",children:"Nuevo Punto de Venta"})]}),e[11]=se):se=e[11];let te;e[12]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx(r,{htmlFor:"name",children:"Nombre"}),e[12]=te):te=e[12];let d;e[13]!==l?(d=t=>l("name",t.target.value),e[13]=l,e[14]=d):d=e[14];let m;e[15]!==a.name||e[16]!==d?(m=s.jsx(ge,{id:"name",value:a.name,onChange:d,placeholder:"Ej. Taquilla Principal"}),e[15]=a.name,e[16]=d,e[17]=m):m=e[17];let h;e[18]!==o.name?(h=o.name&&s.jsx("span",{className:"text-red-500 text-sm",children:o.name}),e[18]=o.name,e[19]=h):h=e[19];let f;e[20]!==m||e[21]!==h?(f=s.jsxs("div",{className:"space-y-2",children:[te,m,h]}),e[20]=m,e[21]=h,e[22]=f):f=e[22];let le;e[23]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(r,{htmlFor:"logo",children:"Logo"}),e[23]=le):le=e[23];let p;e[24]!==l?(p=s.jsx(ge,{id:"logo",type:"file",accept:"image/*",onChange:t=>l("logo_path",t.target.files?t.target.files[0]:null)}),e[24]=l,e[25]=p):p=e[25];let u;e[26]!==o.logo_path?(u=o.logo_path&&s.jsx("span",{className:"text-red-500 text-sm",children:o.logo_path}),e[26]=o.logo_path,e[27]=u):u=e[27];let x;e[28]!==p||e[29]!==u?(x=s.jsxs("div",{className:"space-y-2",children:[le,p,u]}),e[28]=p,e[29]=u,e[30]=x):x=e[30];let ae,ie;e[31]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx(r,{htmlFor:"is_digital_only",children:"¿Solo venden boleto digital?"}),ie=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Si está activo, se mostrará un mensaje en el punto de venta que indica que solo venden boletos digitales."}),e[31]=ae,e[32]=ie):(ae=e[31],ie=e[32]);let _;e[33]!==l?(_=t=>l("is_digital_only",t),e[33]=l,e[34]=_):_=e[34];let g;e[35]!==a.is_digital_only||e[36]!==_?(g=s.jsxs("div",{className:"space-y-2",children:[ae,ie,s.jsx(I,{id:"is_digital_only",checked:a.is_digital_only,onCheckedChange:_})]}),e[35]=a.is_digital_only,e[36]=_,e[37]=g):g=e[37];let oe,ne;e[38]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(r,{htmlFor:"payment_methods",children:"Métodos de pago"}),ne=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona los métodos de pago que se aceptan en el punto de venta."}),e[38]=oe,e[39]=ne):(oe=e[38],ne=e[39]);let re;e[40]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(r,{htmlFor:"payment_methods",children:"Efectivo"}),e[40]=re):re=e[40];let y;e[41]!==l?(y=t=>l("payment_methods_cash",t),e[41]=l,e[42]=y):y=e[42];let j;e[43]!==a.payment_methods_cash||e[44]!==y?(j=s.jsx(I,{id:"payment_methods_cash",checked:a.payment_methods_cash,onCheckedChange:y}),e[43]=a.payment_methods_cash,e[44]=y,e[45]=j):j=e[45];let ce;e[46]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(r,{htmlFor:"payment_methods",children:"Tarjeta"}),e[46]=ce):ce=e[46];let b;e[47]!==l?(b=t=>l("payment_methods_card",t),e[47]=l,e[48]=b):b=e[48];let v;e[49]!==a.payment_methods_card||e[50]!==b?(v=s.jsx(I,{id:"payment_methods_card",checked:a.payment_methods_card,onCheckedChange:b}),e[49]=a.payment_methods_card,e[50]=b,e[51]=v):v=e[51];let N;e[52]!==j||e[53]!==v?(N=s.jsxs("div",{className:"space-y-2",children:[oe,ne,s.jsxs("div",{className:"flex gap-4",children:[re,j,ce,v]})]}),e[52]=j,e[53]=v,e[54]=N):N=e[54];let de;e[55]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(r,{htmlFor:"address",children:"Dirección"}),e[55]=de):de=e[55];let S;e[56]!==l?(S=t=>{l("address",t.target.value),Le(t.target.value)},e[56]=l,e[57]=S):S=e[57];let k;e[58]!==a.address||e[59]!==S?(k=s.jsx(He,{id:"address",value:a.address,onChange:S,placeholder:"Calle, Número, Colonia, Ciudad..."}),e[58]=a.address,e[59]=S,e[60]=k):k=e[60];let C;e[61]!==je?(C=()=>Me(je),e[61]=je,e[62]=C):C=e[62];let me;e[63]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx($e,{className:"h-4 w-4 mr-2"}),e[63]=me):me=e[63];let w;e[64]!==C?(w=s.jsxs(we,{type:"button",variant:"secondary",onClick:C,title:"Buscar en el mapa",className:"h-auto",children:[me,"Buscar en Mapa"]}),e[64]=C,e[65]=w):w=e[65];let L;e[66]!==k||e[67]!==w?(L=s.jsxs("div",{className:"flex gap-2",children:[k,w]}),e[66]=k,e[67]=w,e[68]=L):L=e[68];let F;e[69]!==o.address?(F=o.address&&s.jsx("span",{className:"text-red-500 text-sm",children:o.address}),e[69]=o.address,e[70]=F):F=e[70];let A;e[71]!==L||e[72]!==F?(A=s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[de,L,F]}),e[71]=L,e[72]=F,e[73]=A):A=e[73];let he;e[74]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(r,{children:"Ubicación en Mapa"}),e[74]=he):he=e[74];let M,P;e[75]!==l?(M=(t,i)=>{l(n=>({...n,latitude:t,longitude:i}))},P=t=>{l(i=>({...i,address:t})),Le(t)},e[75]=l,e[76]=M,e[77]=P):(M=e[76],P=e[77]);let E;e[78]!==be||e[79]!==M||e[80]!==P?(E=s.jsx(Te,{searchQuery:be,onLocationChange:M,onAddressFound:P}),e[78]=be,e[79]=M,e[80]=P,e[81]=E):E=e[81];let fe;e[82]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx("p",{className:"text-sm text-gray-500",children:'Haz clic en el mapa para seleccionar la ubicación exacta o usa el botón "Buscar en Mapa" con la dirección ingresada.'}),e[82]=fe):fe=e[82];let V;e[83]!==E?(V=s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[he,E,fe]}),e[83]=E,e[84]=V):V=e[84];let B;e[85]!==f||e[86]!==x||e[87]!==g||e[88]!==N||e[89]!==A||e[90]!==V?(B=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f,x,g,N,A,V]}),e[85]=f,e[86]=x,e[87]=g,e[88]=N,e[89]=A,e[90]=V,e[91]=B):B=e[91];let pe;e[92]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx("h3",{className:"text-lg font-semibold",children:"Estados Relacionados"}),e[92]=pe):pe=e[92];let D;if(e[93]!==a.states||e[94]!==l||e[95]!==ye){let t;e[97]!==a.states||e[98]!==l?(t=i=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(I,{id:`state-${i.id}`,checked:a.states.includes(i.id),onCheckedChange:n=>{n?l("states",[...a.states,i.id]):l("states",a.states.filter(Ee=>Ee!==i.id))}}),s.jsx(r,{htmlFor:`state-${i.id}`,children:i.name})]},i.id),e[97]=a.states,e[98]=l,e[99]=t):t=e[99],D=ye.map(t),e[93]=a.states,e[94]=l,e[95]=ye,e[96]=D}else D=e[96];let Q;e[100]!==D?(Q=s.jsxs("div",{className:"space-y-4",children:[pe,s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 border rounded-lg bg-card/50",children:D})]}),e[100]=D,e[101]=Q):Q=e[101];let ue;e[102]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx("h3",{className:"text-lg font-semibold",children:"Horarios de Atención"}),e[102]=ue):ue=e[102];let q;e[103]!==a.opening_hours||e[104]!==J?(q=Ae.map(t=>{const i=a.opening_hours[t.key]||{closed:!0};return s.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border bg-background/50",children:[s.jsx("div",{className:"w-24 font-medium",children:t.label}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{checked:!i.closed,onCheckedChange:n=>J(t.key,"closed",!n)}),s.jsx("span",{className:"text-sm text-muted-foreground w-16",children:i.closed?"Cerrado":"Abierto"})]}),!i.closed&&s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(ge,{type:"time",className:"w-32",value:i.open,onChange:n=>J(t.key,"open",n.target.value)}),s.jsx("span",{children:"a"}),s.jsx(ge,{type:"time",className:"w-32",value:i.close,onChange:n=>J(t.key,"close",n.target.value)})]})]},t.key)}),e[103]=a.opening_hours,e[104]=J,e[105]=q):q=e[105];let H;e[106]!==q?(H=s.jsxs("div",{className:"space-y-4",children:[ue,s.jsx("div",{className:"grid gap-4",children:q})]}),e[106]=q,e[107]=H):H=e[107];let T;e[108]!==l?(T=t=>l("is_active",t),e[108]=l,e[109]=T):T=e[109];let R;e[110]!==a.is_active||e[111]!==T?(R=s.jsx(I,{checked:a.is_active,onCheckedChange:T}),e[110]=a.is_active,e[111]=T,e[112]=R):R=e[112];let xe;e[113]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(r,{children:"Punto de Venta Activo"}),e[113]=xe):xe=e[113];let $;e[114]!==R?($=s.jsxs("div",{className:"flex items-center gap-2",children:[R,xe]}),e[114]=R,e[115]=$):$=e[115];const ke=W?"Guardando...":"Guardar Punto de Venta";let z;e[116]!==W||e[117]!==ke?(z=s.jsx(we,{type:"submit",disabled:W,children:ke}),e[116]=W,e[117]=ke,e[118]=z):z=e[118];let G;e[119]!==$||e[120]!==z?(G=s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[$,z]}),e[119]=$,e[120]=z,e[121]=G):G=e[121];let _e;return e[122]!==Se||e[123]!==B||e[124]!==Q||e[125]!==H||e[126]!==G?(_e=s.jsxs(qe,{breadcrumbs:K,children:[ee,s.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[se,s.jsxs("form",{onSubmit:Se,className:"space-y-8 bg-card p-6 rounded-xl border shadow-sm",children:[B,Q,H,G]})]})]}),e[122]=Se,e[123]=B,e[124]=Q,e[125]=H,e[126]=G,e[127]=_e):_e=e[127],_e}function ze(c){return{...c,opening_hours:JSON.stringify(c.opening_hours)}}function Ge(c,e){return c[e.key]={open:"09:00",close:"18:00",closed:!1},c}export{ms as default};
