import{b,j as e,H as f,d as m,r as c}from"./app-DY6XQSkc.js";import{A as j,I as g}from"./app-layout-BwpZQw_u.js";import{h as p}from"./dropdown-menu-BNMmQeLy.js";import{B as o}from"./button-BhJInusp.js";import{L as y}from"./loader-circle-DuIH_qMJ.js";import{U as v}from"./upload-Cz5Fkpiv.js";import{C as w}from"./copy-wYxe87MK.js";import{T as N}from"./trash-Dkw_Fa2L.js";/* empty css            */import"./utils-DvRnx1Xn.js";import"./index-Bc0Gev3e.js";import"./x-D7TKEL8f.js";import"./tooltip-Bn7OkLDR.js";import"./index-BHeX6-dc.js";import"./index-Bdyj2ZHa.js";import"./index-YfNXcXHS.js";import"./map-pin-BZBw0hfV.js";function H({images:l}){const[i,d]=b.useState(!1),x=async a=>{const r=a.target.files?.[0];if(!r)return;const t=new FormData;t.append("image",r),d(!0);try{await m.post(p("admin.images.store"),t,{headers:{Accept:"application/json"}}),c.reload({only:["images"]})}catch(s){console.error("Error uploading image:",s.response?.data||s);let n=s.response?.data?.message||s.message||"Error desconocido";s.response?.data?.errors?.image&&(n=s.response.data.errors.image[0]),alert("Error al subir: "+n)}finally{d(!1),a.target&&(a.target.value="")}},h=async a=>{if(confirm("¿Seguro que deseas eliminar esta imagen para siempre? Si está vinculada a un evento, dejará de verse."))try{await m.delete(p("admin.images.destroy",a),{headers:{Accept:"application/json"}}),c.reload({only:["images"]})}catch(r){console.error("Error deleting image:",r.response?.data||r);const t=r.response?.data?.message||r.message||"Error desconocido";alert("Error al eliminar: "+t)}},u=a=>{navigator.clipboard.writeText(window.location.origin+a),alert("URL copiada al portapapeles")};return e.jsxs(j,{breadcrumbs:[{title:"Multimedia",href:"#"}],children:[e.jsx(f,{title:"Biblioteca de Medios"}),e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center",children:[e.jsx(g,{className:"w-6 h-6 mr-2"}),"Biblioteca de Medios"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Administra todas las imágenes subidas al sistema. Estas imágenes pueden ser reutilizadas en eventos y puntos de venta."})]}),e.jsxs("div",{className:"relative mt-4 sm:mt-0",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden",id:"global-upload",disabled:i}),e.jsx("label",{htmlFor:"global-upload",children:e.jsx(o,{variant:"default",asChild:!0,disabled:i,children:e.jsxs("span",{children:[i?e.jsx(y,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(v,{className:"w-4 h-4 mr-2"}),"Subir Nueva Imagen"]})})})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 dark:bg-gray-900 dark:border-gray-700 p-6",children:l.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:l.map(a=>e.jsxs("div",{className:"relative group rounded-lg overflow-hidden border bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 transition-all hover:shadow-md",children:[e.jsx("div",{className:"aspect-square overflow-hidden bg-gray-100 dark:bg-gray-900 border-b border-gray-100 dark:border-gray-700",children:e.jsx("a",{href:a.url,target:"_blank",rel:"noreferrer",children:e.jsx("img",{src:a.url,className:"w-full h-full object-cover transition-transform group-hover:scale-105",alt:"Library item",loading:"lazy"})})}),e.jsxs("div",{className:"p-2 flex justify-between items-center bg-white dark:bg-gray-800",children:[e.jsxs(o,{variant:"ghost",size:"sm",className:"h-8 text-xs px-2",onClick:()=>u(a.url),title:"Copiar URL",children:[e.jsx(w,{className:"w-3.5 h-3.5 mr-1"})," URL"]}),e.jsx(o,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:()=>h(a.id),title:"Eliminar",children:e.jsx(N,{className:"w-4 h-4"})})]})]},a.id))}):e.jsxs("div",{className:"text-center py-20 text-gray-500 dark:text-gray-400",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-1",children:"Biblioteca vacía"}),e.jsx("p",{children:"No has subido ninguna imagen todavía."})]})})]})]})}export{H as default};
