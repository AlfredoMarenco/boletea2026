import{c as Xe,b as Oe,u as Ze,j as t,L as Ke,H as et}from"./app-C57to4gS.js";import{h as Te}from"./dropdown-menu-Bh7vV8NV.js";import{A as tt}from"./app-layout-rmYNBsAB.js";import{B as Ie}from"./button-Cs4SO7Sp.js";import{I as ke}from"./input-BfnCHbPe.js";import{L as r}from"./label-VzbhcBpr.js";import{T as st}from"./textarea-CCfw-9G-.js";import{S as K}from"./switch-ChtubV49.js";import{L as lt}from"./LocationPicker-zfJEB4w_.js";import{A as at}from"./arrow-left-1dlwQytq.js";import{M as it}from"./map-pin-nV-hQv1D.js";/* empty css            */import"./index-BAiAcrRY.js";import"./utils-DvRnx1Xn.js";import"./x-KWqWXJEt.js";import"./tooltip-DwFPhEVT.js";import"./index-pk2ercdV.js";import"./index-DguSKVDC.js";import"./index-YfNXcXHS.js";import"./index-CWmhLRVy.js";const Ge=[{key:"monday",label:"Lunes"},{key:"tuesday",label:"Martes"},{key:"wednesday",label:"Miércoles"},{key:"thursday",label:"Jueves"},{key:"friday",label:"Viernes"},{key:"saturday",label:"Sábado"},{key:"sunday",label:"Domingo"}];function At(d){const e=Xe.c(158),{salesCenter:a,states:Ce}=d,[we,Je]=Oe.useState(a.address||""),[Le,Ue]=Oe.useState("");let te;e[0]===Symbol.for("react.memo_cache_sentinel")?(te=Ge.reduce(ct,{}),e[0]=te):te=e[0];const Ye=te;let se;e[1]!==a.opening_hours?(se={...Ye,...a.opening_hours},e[1]=a.opening_hours,e[2]=se):se=e[2];const Ae=se,Fe=a.name||"",Ee=a.address||"",Be=!!a.is_active;let m;e[3]!==a.states?(m=a.states?a.states.map(nt):[],e[3]=a.states,e[4]=m):m=e[4];const Me=a.latitude||null,De=a.longitude||null,He=!!a.is_digital_only,Pe=!!a.payment_methods_cash,Qe=!!a.payment_methods_card;let le;e[5]!==Ae||e[6]!==Pe||e[7]!==Qe||e[8]!==Fe||e[9]!==Ee||e[10]!==Be||e[11]!==m||e[12]!==Me||e[13]!==De||e[14]!==He?(le={_method:"put",name:Fe,address:Ee,logo_path:null,is_active:Be,opening_hours:Ae,states:m,latitude:Me,longitude:De,is_digital_only:He,payment_methods_cash:Pe,payment_methods_card:Qe},e[5]=Ae,e[6]=Pe,e[7]=Qe,e[8]=Fe,e[9]=Ee,e[10]=Be,e[11]=m,e[12]=Me,e[13]=De,e[14]=He,e[15]=le):le=e[15];const{data:i,setData:l,post:Ve,transform:$e,processing:ae,errors:n}=Ze(le);let ie;e[16]!==i.opening_hours||e[17]!==l?(ie=(s,o,c)=>{l("opening_hours",{...i.opening_hours,[s]:{...i.opening_hours[s],[o]:c}})},e[16]=i.opening_hours,e[17]=l,e[18]=ie):ie=e[18];const ee=ie;let oe;e[19]!==Ve||e[20]!==a.id||e[21]!==$e?(oe=s=>{s.preventDefault(),$e(ot),Ve(Te("admin.sales-centers.update",a.id))},e[19]=Ve,e[20]=a.id,e[21]=$e,e[22]=oe):oe=e[22];const qe=oe;let ne;e[23]===Symbol.for("react.memo_cache_sentinel")?(ne=[{title:"Puntos de Venta",href:Te("admin.sales-centers.index")},{title:"Editar",href:"#"}],e[23]=ne):ne=e[23];const ze=`Editar ${a.name}`;let h;e[24]!==ze?(h=t.jsx(et,{title:ze}),e[24]=ze,e[25]=h):h=e[25];let ce;e[26]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(Ie,{variant:"ghost",size:"icon",asChild:!0,children:t.jsx(Ke,{href:Te("admin.sales-centers.index"),children:t.jsx(at,{className:"h-5 w-5"})})}),e[26]=ce):ce=e[26];let p;e[27]!==a.name?(p=t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[ce,t.jsxs("h1",{className:"text-2xl font-bold",children:["Editar: ",a.name]})]}),e[27]=a.name,e[28]=p):p=e[28];let re;e[29]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(r,{htmlFor:"name",children:"Nombre"}),e[29]=re):re=e[29];let f;e[30]!==l?(f=s=>l("name",s.target.value),e[30]=l,e[31]=f):f=e[31];let u;e[32]!==i.name||e[33]!==f?(u=t.jsx(ke,{id:"name",value:i.name,onChange:f}),e[32]=i.name,e[33]=f,e[34]=u):u=e[34];let x;e[35]!==n.name?(x=n.name&&t.jsx("span",{className:"text-red-500 text-sm",children:n.name}),e[35]=n.name,e[36]=x):x=e[36];let _;e[37]!==u||e[38]!==x?(_=t.jsxs("div",{className:"space-y-2",children:[re,u,x]}),e[37]=u,e[38]=x,e[39]=_):_=e[39];let de;e[40]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(r,{htmlFor:"logo",children:"Logo (Opcional)"}),e[40]=de):de=e[40];let g;e[41]!==a.logo_path?(g=a.logo_path&&t.jsx("img",{src:a.logo_path,className:"h-10 w-10 object-contain border rounded"}),e[41]=a.logo_path,e[42]=g):g=e[42];let y;e[43]!==l?(y=t.jsx(ke,{id:"logo",type:"file",accept:"image/*",onChange:s=>l("logo_path",s.target.files?s.target.files[0]:null)}),e[43]=l,e[44]=y):y=e[44];let j;e[45]!==g||e[46]!==y?(j=t.jsxs("div",{className:"flex gap-4 items-center",children:[g,y]}),e[45]=g,e[46]=y,e[47]=j):j=e[47];let b;e[48]!==n.logo_path?(b=n.logo_path&&t.jsx("span",{className:"text-red-500 text-sm",children:n.logo_path}),e[48]=n.logo_path,e[49]=b):b=e[49];let v;e[50]!==j||e[51]!==b?(v=t.jsxs("div",{className:"space-y-2",children:[de,j,b]}),e[50]=j,e[51]=b,e[52]=v):v=e[52];let me,he;e[53]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(r,{htmlFor:"is_digital_only",children:"¿Solo venden boleto digital?"}),he=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Si está activo, se mostrará un mensaje en el punto de venta que indica que solo venden boletos digitales."}),e[53]=me,e[54]=he):(me=e[53],he=e[54]);let N;e[55]!==l?(N=s=>l("is_digital_only",s),e[55]=l,e[56]=N):N=e[56];let S;e[57]!==i.is_digital_only||e[58]!==N?(S=t.jsxs("div",{className:"space-y-2",children:[me,he,t.jsx(K,{id:"is_digital_only",checked:i.is_digital_only,onCheckedChange:N})]}),e[57]=i.is_digital_only,e[58]=N,e[59]=S):S=e[59];let pe,fe;e[60]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(r,{htmlFor:"payment_methods",children:"Métodos de pago"}),fe=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona los métodos de pago que se aceptan en el punto de venta."}),e[60]=pe,e[61]=fe):(pe=e[60],fe=e[61]);let ue;e[62]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(r,{htmlFor:"payment_methods",children:"Efectivo"}),e[62]=ue):ue=e[62];let k;e[63]!==l?(k=s=>l("payment_methods_cash",s),e[63]=l,e[64]=k):k=e[64];let C;e[65]!==i.payment_methods_cash||e[66]!==k?(C=t.jsx(K,{id:"payment_methods_cash",checked:i.payment_methods_cash,onCheckedChange:k}),e[65]=i.payment_methods_cash,e[66]=k,e[67]=C):C=e[67];let xe;e[68]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(r,{htmlFor:"payment_methods",children:"Tarjeta"}),e[68]=xe):xe=e[68];let w;e[69]!==l?(w=s=>l("payment_methods_card",s),e[69]=l,e[70]=w):w=e[70];let L;e[71]!==i.payment_methods_card||e[72]!==w?(L=t.jsx(K,{id:"payment_methods_card",checked:i.payment_methods_card,onCheckedChange:w}),e[71]=i.payment_methods_card,e[72]=w,e[73]=L):L=e[73];let A;e[74]!==C||e[75]!==L?(A=t.jsxs("div",{className:"space-y-2",children:[pe,fe,t.jsxs("div",{className:"flex gap-4",children:[ue,C,xe,L]})]}),e[74]=C,e[75]=L,e[76]=A):A=e[76];let _e;e[77]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(r,{htmlFor:"address",children:"Dirección"}),e[77]=_e):_e=e[77];let F;e[78]!==l?(F=s=>{l("address",s.target.value),Je(s.target.value)},e[78]=l,e[79]=F):F=e[79];let E;e[80]!==i.address||e[81]!==F?(E=t.jsx(st,{id:"address",value:i.address,onChange:F,placeholder:"Calle, Número, Colonia, Ciudad..."}),e[80]=i.address,e[81]=F,e[82]=E):E=e[82];let B;e[83]!==we?(B=()=>Ue(we),e[83]=we,e[84]=B):B=e[84];let ge;e[85]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(it,{className:"h-4 w-4 mr-2"}),e[85]=ge):ge=e[85];let M;e[86]!==B?(M=t.jsxs(Ie,{type:"button",variant:"secondary",onClick:B,title:"Buscar en el mapa",className:"h-auto",children:[ge,"Buscar en Mapa"]}),e[86]=B,e[87]=M):M=e[87];let D;e[88]!==E||e[89]!==M?(D=t.jsxs("div",{className:"flex gap-2",children:[E,M]}),e[88]=E,e[89]=M,e[90]=D):D=e[90];let H;e[91]!==n.address?(H=n.address&&t.jsx("span",{className:"text-red-500 text-sm",children:n.address}),e[91]=n.address,e[92]=H):H=e[92];let P;e[93]!==D||e[94]!==H?(P=t.jsxs("div",{className:"space-y-2 md:col-span-2",children:[_e,D,H]}),e[93]=D,e[94]=H,e[95]=P):P=e[95];let ye;e[96]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(r,{children:"Ubicación en Mapa"}),e[96]=ye):ye=e[96];let Q,V;e[97]!==l?(Q=(s,o)=>{l(c=>({...c,latitude:s,longitude:o}))},V=s=>{l(o=>({...o,address:s})),Je(s)},e[97]=l,e[98]=Q,e[99]=V):(Q=e[98],V=e[99]);let $;e[100]!==Le||e[101]!==a.latitude||e[102]!==a.longitude||e[103]!==Q||e[104]!==V?($=t.jsx(lt,{initialLatitude:a.latitude,initialLongitude:a.longitude,searchQuery:Le,onLocationChange:Q,onAddressFound:V}),e[100]=Le,e[101]=a.latitude,e[102]=a.longitude,e[103]=Q,e[104]=V,e[105]=$):$=e[105];let je;e[106]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Haz clic en el mapa para ajustar la ubicación exacta."}),e[106]=je):je=e[106];let q;e[107]!==$?(q=t.jsxs("div",{className:"space-y-2 md:col-span-2",children:[ye,$,je]}),e[107]=$,e[108]=q):q=e[108];let z;e[109]!==_||e[110]!==v||e[111]!==S||e[112]!==A||e[113]!==P||e[114]!==q?(z=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_,v,S,A,P,q]}),e[109]=_,e[110]=v,e[111]=S,e[112]=A,e[113]=P,e[114]=q,e[115]=z):z=e[115];let be;e[116]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx("h3",{className:"text-lg font-semibold",children:"Estados Relacionados"}),e[116]=be):be=e[116];let R;if(e[117]!==i.states||e[118]!==l||e[119]!==Ce){let s;e[121]!==i.states||e[122]!==l?(s=o=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(K,{id:`state-${o.id}`,checked:i.states.includes(o.id),onCheckedChange:c=>{c?l("states",[...i.states,o.id]):l("states",i.states.filter(We=>We!==o.id))}}),t.jsx(r,{htmlFor:`state-${o.id}`,children:o.name})]},o.id),e[121]=i.states,e[122]=l,e[123]=s):s=e[123],R=Ce.map(s),e[117]=i.states,e[118]=l,e[119]=Ce,e[120]=R}else R=e[120];let T;e[124]!==R?(T=t.jsxs("div",{className:"space-y-4",children:[be,t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 border rounded-lg bg-card/50",children:R})]}),e[124]=R,e[125]=T):T=e[125];let ve;e[126]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx("h3",{className:"text-lg font-semibold",children:"Horarios de Atención"}),e[126]=ve):ve=e[126];let I;e[127]!==i.opening_hours||e[128]!==ee?(I=Ge.map(s=>{const o=i.opening_hours[s.key]||{closed:!0,open:"09:00",close:"18:00"};return t.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border bg-background/50",children:[t.jsx("div",{className:"w-24 font-medium",children:s.label}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(K,{checked:!o.closed,onCheckedChange:c=>ee(s.key,"closed",!c)}),t.jsx("span",{className:"text-sm text-muted-foreground w-16",children:o.closed?"Cerrado":"Abierto"})]}),!o.closed&&t.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[t.jsx(ke,{type:"time",className:"w-32",value:o.open,onChange:c=>ee(s.key,"open",c.target.value)}),t.jsx("span",{children:"a"}),t.jsx(ke,{type:"time",className:"w-32",value:o.close,onChange:c=>ee(s.key,"close",c.target.value)})]})]},s.key)}),e[127]=i.opening_hours,e[128]=ee,e[129]=I):I=e[129];let J;e[130]!==I?(J=t.jsxs("div",{className:"space-y-4",children:[ve,t.jsx("div",{className:"grid gap-4",children:I})]}),e[130]=I,e[131]=J):J=e[131];let O;e[132]!==l?(O=s=>l("is_active",s),e[132]=l,e[133]=O):O=e[133];let G;e[134]!==i.is_active||e[135]!==O?(G=t.jsx(K,{checked:i.is_active,onCheckedChange:O}),e[134]=i.is_active,e[135]=O,e[136]=G):G=e[136];let Ne;e[137]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(r,{children:"Punto de Venta Activo"}),e[137]=Ne):Ne=e[137];let U;e[138]!==G?(U=t.jsxs("div",{className:"flex items-center gap-2",children:[G,Ne]}),e[138]=G,e[139]=U):U=e[139];const Re=ae?"Guardando...":"Actualizar Punto de Venta";let Y;e[140]!==ae||e[141]!==Re?(Y=t.jsx(Ie,{type:"submit",disabled:ae,children:Re}),e[140]=ae,e[141]=Re,e[142]=Y):Y=e[142];let W;e[143]!==U||e[144]!==Y?(W=t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[U,Y]}),e[143]=U,e[144]=Y,e[145]=W):W=e[145];let X;e[146]!==qe||e[147]!==z||e[148]!==T||e[149]!==J||e[150]!==W?(X=t.jsxs("form",{onSubmit:qe,className:"space-y-8 bg-card p-6 rounded-xl border shadow-sm",children:[z,T,J,W]}),e[146]=qe,e[147]=z,e[148]=T,e[149]=J,e[150]=W,e[151]=X):X=e[151];let Z;e[152]!==p||e[153]!==X?(Z=t.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[p,X]}),e[152]=p,e[153]=X,e[154]=Z):Z=e[154];let Se;return e[155]!==h||e[156]!==Z?(Se=t.jsxs(tt,{breadcrumbs:ne,children:[h,Z]}),e[155]=h,e[156]=Z,e[157]=Se):Se=e[157],Se}function ot(d){return{...d,opening_hours:JSON.stringify(d.opening_hours)}}function nt(d){return d.id}function ct(d,e){return d[e.key]={open:"09:00",close:"18:00",closed:!1},d}export{At as default};
